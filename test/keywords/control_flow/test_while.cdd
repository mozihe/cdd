/**
 * @file test_while.cdd
 * @brief while 关键字测试用例
 * 
 * 测试 while 循环的各种用法
 */

// 1. 基本 while 循环
int test_basic_while(void) {
    int i = 0;
    int sum = 0;
    while (i < 10) {
        sum = sum + i;
        i = i + 1;
    }
    return sum;
}

// 2. while 不带大括号
int test_while_no_brace(void) {
    int i = 0;
    while (i < 10)
        i = i + 1;
    return i;
}

// 3. while 条件表达式
int test_while_expression(int n) {
    int count = 0;
    while (n > 0) {
        n = n - 1;
        count = count + 1;
    }
    return count;
}

// 4. while 与指针
int test_while_pointer(int* arr, int size) {
    int* p = arr;
    int* end = arr + size;
    int sum = 0;
    while (p < end) {
        sum = sum + *p;
        p = p + 1;
    }
    return sum;
}

// 5. while 字符串遍历
int test_while_string(const char* str) {
    int len = 0;
    while (*str != '\0') {
        len = len + 1;
        str = str + 1;
    }
    return len;
}

// 6. while 与逻辑运算
int test_while_logical(int a, int b) {
    int count = 0;
    while (a > 0 && b > 0) {
        a = a - 1;
        b = b - 1;
        count = count + 1;
    }
    return count;
}

// 7. while 嵌套
int test_while_nested(int n, int m) {
    int i = 0;
    int sum = 0;
    while (i < n) {
        int j = 0;
        while (j < m) {
            sum = sum + 1;
            j = j + 1;
        }
        i = i + 1;
    }
    return sum;
}

// 8. while 深度嵌套
int test_while_deep_nested(void) {
    int a = 0;
    int count = 0;
    while (a < 3) {
        int b = 0;
        while (b < 3) {
            int c = 0;
            while (c < 3) {
                count = count + 1;
                c = c + 1;
            }
            b = b + 1;
        }
        a = a + 1;
    }
    return count;
}

// 9. while 与 break
int test_while_break(int n) {
    int i = 0;
    while (i < 100) {
        if (i >= n) {
            break;
        }
        i = i + 1;
    }
    return i;
}

// 10. while 与 continue
int test_while_continue(int n) {
    int i = 0;
    int sum = 0;
    while (i < n) {
        i = i + 1;
        if (i % 2 == 0) {
            continue;  // 跳过偶数
        }
        sum = sum + i;
    }
    return sum;
}

// 11. while 无限循环（带 break 退出）
int test_while_infinite(int target) {
    int i = 0;
    while (1) {
        if (i == target) {
            break;
        }
        i = i + 1;
    }
    return i;
}

// 12. while 条件赋值
int test_while_assign(int* arr, int size) {
    int i = 0;
    int val;
    int sum = 0;
    while (i < size && (val = arr[i]) != 0) {
        sum = sum + val;
        i = i + 1;
    }
    return sum;
}

// 13. while 递减
int test_while_decrement(int n) {
    int sum = 0;
    while (n > 0) {
        sum = sum + n;
        n = n - 1;
    }
    return sum;
}

// 14. while 与自增运算
int test_while_increment(int n) {
    int i = 0;
    int sum = 0;
    while (i < n) {
        sum = sum + i;
        ++i;
    }
    return sum;
}

// 15. while 复杂条件
int test_while_complex(int a, int b, int c) {
    int count = 0;
    while ((a > 0 && b > 0) || c > 0) {
        if (a > 0) a = a - 1;
        if (b > 0) b = b - 1;
        if (c > 0) c = c - 1;
        count = count + 1;
    }
    return count;
}

// 16. while 查找元素
int test_while_search(int* arr, int size, int target) {
    int i = 0;
    while (i < size) {
        if (arr[i] == target) {
            return i;
        }
        i = i + 1;
    }
    return -1;
}

// 17. while 计算阶乘
int test_while_factorial(int n) {
    int result = 1;
    while (n > 1) {
        result = result * n;
        n = n - 1;
    }
    return result;
}

// 18. while 计算幂
int test_while_power(int base, int exp) {
    int result = 1;
    while (exp > 0) {
        result = result * base;
        exp = exp - 1;
    }
    return result;
}

// 19. while 计算 GCD
int test_while_gcd(int a, int b) {
    while (b != 0) {
        int temp = b;
        b = a % b;
        a = temp;
    }
    return a;
}

// 20. while 数组复制
void test_while_copy(int* dest, int* src, int n) {
    int i = 0;
    while (i < n) {
        dest[i] = src[i];
        i = i + 1;
    }
}

// 21. while 数组填充
void test_while_fill(int* arr, int n, int val) {
    int i = 0;
    while (i < n) {
        arr[i] = val;
        i = i + 1;
    }
}

// 22. while 计数位数
int test_while_digit_count(int n) {
    if (n == 0) return 1;
    if (n < 0) n = -n;
    int count = 0;
    while (n > 0) {
        n = n / 10;
        count = count + 1;
    }
    return count;
}

// 23. while 反转数字
int test_while_reverse(int n) {
    int reversed = 0;
    while (n != 0) {
        reversed = reversed * 10 + n % 10;
        n = n / 10;
    }
    return reversed;
}

// 24. while 检查回文数
int test_while_palindrome(int n) {
    if (n < 0) return 0;
    int original = n;
    int reversed = 0;
    while (n > 0) {
        reversed = reversed * 10 + n % 10;
        n = n / 10;
    }
    return original == reversed;
}

// 25. while 与结构体
struct Node {
    int data;
    struct Node* next;
};

int test_while_linked_list(struct Node* head) {
    int sum = 0;
    while (head != 0) {
        sum = sum + head->data;
        head = head->next;
    }
    return sum;
}

// 26. while 空循环体
void test_while_empty(int n) {
    while (n-- > 0)
        ;  // 空循环体
}

// 27. while 与数组边界
int test_while_bounds(int* arr, int size) {
    int i = 0;
    int max = arr[0];
    while (++i < size) {
        if (arr[i] > max) {
            max = arr[i];
        }
    }
    return max;
}

// 28. while 等待条件
int test_while_wait(int* flag) {
    int count = 0;
    while (*flag == 0) {
        count = count + 1;
        if (count > 1000) {
            *flag = 1;  // 防止无限循环
        }
    }
    return count;
}

// 29. while 处理位
int test_while_bits(unsigned int n) {
    int count = 0;
    while (n) {
        count = count + (n & 1);
        n = n >> 1;
    }
    return count;
}

// 30. while 与函数调用
int get_next(int current) {
    return current + 1;
}

int test_while_function(int start, int end) {
    int current = start;
    int sum = 0;
    while (current < end) {
        sum = sum + current;
        current = get_next(current);
    }
    return sum;
}

int main(void) {
    // 基本 while
    int i = 0;
    while (i < 10) {
        i = i + 1;
    }
    
    // 嵌套 while
    int a = 0;
    while (a < 3) {
        int b = 0;
        while (b < 3) {
            b = b + 1;
        }
        a = a + 1;
    }
    
    // while 与 break
    int n = 0;
    while (1) {
        if (n >= 10) break;
        n = n + 1;
    }
    
    return 0;
}
