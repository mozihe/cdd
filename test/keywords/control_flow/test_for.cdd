/**
 * @file test_for.cdd
 * @brief for 关键字测试用例
 * 
 * 测试 for 循环的各种用法
 * for (初始化; 条件; 更新) { 循环体 }
 */

// 1. 基本 for 循环
int test_basic_for(void) {
    int sum = 0;
    for (int i = 0; i < 10; i++) {
        sum = sum + i;
    }
    return sum;
}

// 2. for 循环递减
int test_for_decrement(int n) {
    int sum = 0;
    for (int i = n; i > 0; i--) {
        sum = sum + i;
    }
    return sum;
}

// 3. for 循环步长为 2
int test_for_step2(int n) {
    int count = 0;
    for (int i = 0; i < n; i = i + 2) {
        count = count + 1;
    }
    return count;
}

// 4. for 循环外部变量
int test_for_external_var(int n) {
    int i;
    int sum = 0;
    for (i = 0; i < n; i++) {
        sum = sum + i;
    }
    return i;  // 循环结束后 i 可用
}

// 5. for 循环省略初始化
int test_for_no_init(int start, int end) {
    int i = start;
    int sum = 0;
    for (; i < end; i++) {
        sum = sum + i;
    }
    return sum;
}

// 6. for 循环省略更新
int test_for_no_update(int n) {
    int sum = 0;
    for (int i = 0; i < n; ) {
        sum = sum + i;
        i = i + 1;  // 手动更新
    }
    return sum;
}

// 7. for 循环省略条件（无限循环）
int test_for_no_cond(int limit) {
    int i = 0;
    for (;;) {  // 无限循环
        if (i >= limit) {
            break;
        }
        i = i + 1;
    }
    return i;
}

// 8. for 循环只有条件
int test_for_only_cond(int n) {
    int i = 0;
    int sum = 0;
    for (; i < n; ) {
        sum = sum + i;
        i = i + 1;
    }
    return sum;
}

// 9. 嵌套 for 循环
int test_for_nested(int rows, int cols) {
    int count = 0;
    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < cols; j++) {
            count = count + 1;
        }
    }
    return count;
}

// 10. 三层嵌套 for
int test_for_3level(int a, int b, int c) {
    int count = 0;
    for (int i = 0; i < a; i++) {
        for (int j = 0; j < b; j++) {
            for (int k = 0; k < c; k++) {
                count = count + 1;
            }
        }
    }
    return count;
}

// 11. for 循环与 break
int test_for_break(int n, int target) {
    for (int i = 0; i < n; i++) {
        if (i == target) {
            return i;  // 找到目标
        }
    }
    return -1;  // 未找到
}

// 12. for 循环与 continue
int test_for_continue(int n) {
    int sum = 0;
    for (int i = 0; i < n; i++) {
        if (i % 2 == 0) {
            continue;  // 跳过偶数
        }
        sum = sum + i;
    }
    return sum;
}

// 13. for 循环遍历数组
int test_for_array(int* arr, int size) {
    int sum = 0;
    for (int i = 0; i < size; i++) {
        sum = sum + arr[i];
    }
    return sum;
}

// 14. for 循环指针遍历
int test_for_pointer(int* arr, int size) {
    int sum = 0;
    for (int* p = arr; p < arr + size; p++) {
        sum = sum + *p;
    }
    return sum;
}

// 15. for 循环修改数组
void test_for_modify(int* arr, int size, int val) {
    for (int i = 0; i < size; i++) {
        arr[i] = val;
    }
}

// 16. for 循环字符串
int test_for_string(char* str) {
    int len = 0;
    for (int i = 0; str[i] != '\0'; i++) {
        len = len + 1;
    }
    return len;
}

// 17. for 循环字符串（指针）
int test_for_string_ptr(char* str) {
    int len = 0;
    for (char* p = str; *p != '\0'; p++) {
        len = len + 1;
    }
    return len;
}

// 18. for 循环多变量
int test_for_multi_var(int n) {
    int sum = 0;
    for (int i = 0, j = n; i < j; i++, j--) {
        sum = sum + i + j;
    }
    return sum;
}

// 19. for 循环复杂条件
int test_for_complex_cond(int a, int b) {
    int count = 0;
    for (int i = 0; i < a && i < b; i++) {
        count = count + 1;
    }
    return count;
}

// 20. for 循环计算阶乘
int test_for_factorial(int n) {
    int result = 1;
    for (int i = 2; i <= n; i++) {
        result = result * i;
    }
    return result;
}

// 21. for 循环计算幂
int test_for_power(int base, int exp) {
    int result = 1;
    for (int i = 0; i < exp; i++) {
        result = result * base;
    }
    return result;
}

// 22. for 循环查找最大值
int test_for_max(int* arr, int size) {
    if (size <= 0) return 0;
    int max = arr[0];
    for (int i = 1; i < size; i++) {
        if (arr[i] > max) {
            max = arr[i];
        }
    }
    return max;
}

// 23. for 循环查找最小值
int test_for_min(int* arr, int size) {
    if (size <= 0) return 0;
    int min = arr[0];
    for (int i = 1; i < size; i++) {
        if (arr[i] < min) {
            min = arr[i];
        }
    }
    return min;
}

// 24. for 循环反向遍历
int test_for_reverse(int* arr, int size) {
    int sum = 0;
    for (int i = size - 1; i >= 0; i--) {
        sum = sum + arr[i];
    }
    return sum;
}

// 25. for 循环二维数组
int test_for_2d(int arr[3][3]) {
    int sum = 0;
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
            sum = sum + arr[i][j];
        }
    }
    return sum;
}

// 26. for 循环矩阵对角线
int test_for_diagonal(int arr[4][4], int n) {
    int sum = 0;
    for (int i = 0; i < n; i++) {
        sum = sum + arr[i][i];
    }
    return sum;
}

// 27. for 循环冒泡排序
void test_for_bubble_sort(int* arr, int size) {
    for (int i = 0; i < size - 1; i++) {
        for (int j = 0; j < size - 1 - i; j++) {
            if (arr[j] > arr[j + 1]) {
                int temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }
}

// 28. for 循环选择排序
void test_for_selection_sort(int* arr, int size) {
    for (int i = 0; i < size - 1; i++) {
        int min_idx = i;
        for (int j = i + 1; j < size; j++) {
            if (arr[j] < arr[min_idx]) {
                min_idx = j;
            }
        }
        if (min_idx != i) {
            int temp = arr[i];
            arr[i] = arr[min_idx];
            arr[min_idx] = temp;
        }
    }
}

// 29. for 循环线性搜索
int test_for_linear_search(int* arr, int size, int target) {
    for (int i = 0; i < size; i++) {
        if (arr[i] == target) {
            return i;
        }
    }
    return -1;
}

// 30. for 循环计数特定元素
int test_for_count(int* arr, int size, int target) {
    int count = 0;
    for (int i = 0; i < size; i++) {
        if (arr[i] == target) {
            count = count + 1;
        }
    }
    return count;
}

// 31. for 循环复制数组
void test_for_copy(int* src, int* dst, int size) {
    for (int i = 0; i < size; i++) {
        dst[i] = src[i];
    }
}

// 32. for 循环数组比较
int test_for_compare(int* a, int* b, int size) {
    for (int i = 0; i < size; i++) {
        if (a[i] != b[i]) {
            return 0;  // 不相等
        }
    }
    return 1;  // 相等
}

// 33. for 循环求和
int test_for_sum_range(int start, int end) {
    int sum = 0;
    for (int i = start; i <= end; i++) {
        sum = sum + i;
    }
    return sum;
}

// 34. for 循环素数检测
int test_for_is_prime(int n) {
    if (n < 2) return 0;
    for (int i = 2; i * i <= n; i++) {
        if (n % i == 0) {
            return 0;
        }
    }
    return 1;
}

// 35. for 循环 GCD
int test_for_gcd(int a, int b) {
    if (a < b) {
        int temp = a;
        a = b;
        b = temp;
    }
    for (;;) {
        int r = a % b;
        if (r == 0) return b;
        a = b;
        b = r;
    }
}

// 36. for 循环结构体数组
struct Point {
    int x;
    int y;
};

int test_for_struct_array(struct Point* points, int n) {
    int sum = 0;
    for (int i = 0; i < n; i++) {
        sum = sum + points[i].x + points[i].y;
    }
    return sum;
}

// 37. for 循环与函数指针数组
int add(int a, int b) { return a + b; }
int sub(int a, int b) { return a - b; }
int mul(int a, int b) { return a * b; }

int test_for_func_ptr(int a, int b) {
    int (*ops[3])(int, int) = {add, sub, mul};
    int result = 0;
    for (int i = 0; i < 3; i++) {
        result = result + ops[i](a, b);
    }
    return result;
}

// 38. for 循环单语句
int test_for_single_stmt(int n) {
    int sum = 0;
    for (int i = 0; i < n; i++)
        sum = sum + i;
    return sum;
}

// 39. for 循环空体
int test_for_empty_body(int* arr, int size) {
    int i;
    for (i = 0; i < size && arr[i] != 0; i++)
        ;  // 空循环体
    return i;
}

// 40. for 循环与位运算
int test_for_bits(int n) {
    int count = 0;
    for (int i = 0; i < 32; i++) {
        if (n & (1 << i)) {
            count = count + 1;
        }
    }
    return count;
}

int main(void) {
    // 基本 for 循环
    int sum = 0;
    for (int i = 0; i < 10; i++) {
        sum = sum + i;
    }
    
    // 嵌套 for 循环
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
            // 3x3 矩阵遍历
        }
    }
    
    // 无限循环
    for (;;) {
        break;  // 立即退出
    }
    
    // 遍历数组
    int arr[5] = {1, 2, 3, 4, 5};
    for (int i = 0; i < 5; i++) {
        arr[i] = arr[i] * 2;
    }
    
    return 0;
}
